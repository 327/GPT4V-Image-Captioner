# GPT4V-Image-Captioner / GPT4V图像打标器

A simple tool utilizing the GPT-4-vision API to generate captions for images.
This project is built with Gradio, and parts of the code were generated by GPT.
Developers: Jiaye and [LEOSAM是只兔狲](https://civitai.com/user/LEOSAM). Welcome everyone to add more new features to this project.

利用 GPT-4-vision API 为图像生成标题的简易工具。
该项目是用 Gradio 构建的，部分代码由 GPT 生成。
开发者：Jiaye 和 [LEOSAM是只兔狲](https://www.liblib.art/userpage/55caae8ef7bc475490ad1a520c041116/publish)。欢迎大家为这个项目增加更多新功能。

![1](https://github.com/jiayev/GPT4V-Image-Captioner/assets/16369810/ef8ff10f-e032-4515-9107-ee64dd6db898)

# Installation and Startup Guide

### Windows

1. Open Command Prompt as administrator and navigate to the directory where you want to clone the repository.
2. Clone the repository using the following command:
    ```
    git clone https://github.com/jiayev/GPT4V-Image-Captioner
    ```
3. Double-click `install_windows.bat` to run it as administrator and install all necessary dependencies.
4. After the installation is complete, you can launch the GPT4V-Image-Captioner by double-clicking `install_windows.bat`.
5. Hold down Ctrl and click on the URL in the terminal, which will open the Gradio app interface in your default browser.
6. Please enter the official OpenAI or third-party GPT-4V API Key and API Url at the top of the interface. After setting the image address, you can start labeling the image.

### Linux / macOS

1. Open a terminal and navigate to the directory where you want to clone the repository.
2. Clone the repository using the following command:
    ```
    git clone https://github.com/jiayev/GPT4V-Image-Captioner
    ```
3. Navigate to the cloned directory:
    ```
    cd GPT4V-Image-Captioner
    ```
4. Make the install and start scripts executable with the following command:
    ```
    chmod +x install_linux_mac.sh; chmod +x start_linux_mac.sh
    ```
5. Execute the install script:
    ```
    ./install_linux_mac.sh
    ```
6. Afterwards, you can launch the GPT4V-Image-Captioner in the terminal by executing the launch script:
    ```
    ./start_linux_mac.sh
    ```
7. Copy the URL displayed in the terminal and open it in your browser to access the Gradio app interface.
8. Please enter the official OpenAI or third-party GPT-4V API Key and API Url at the top of the interface. After setting the image address, you can start labeling the image.

# 安装和启动指南

### Windows

1. 以管理员权限打开命令提示符，并导航到您想要克隆仓库的目录。
2. 使用以下命令克隆仓库：
    ```
    git clone https://github.com/jiayev/GPT4V-Image-Captioner
    ```
3. 双击 `install_windows.bat` 以管理员身份运行它，并安装所有必要的依赖项。
4. 安装完成后，您可以通过双击 `Start_windows.bat`来在终端中启动GPT4V-Image-Captioner。
5. 按住ctrl并点击终端中的URL地址，将在默认浏览器中跳转打开Gradio应用界面。
6. 请在界面最上方输入OpenAI官方或者第三方的GPT-4V API Key与API Url，设置图像地址后，就可以图像打标了。

### Linux / macOS

1. 打开终端，并导航到您想要克隆仓库的目录。
2. 使用以下命令克隆仓库：
    ```
    git clone https://github.com/jiayev/GPT4V-Image-Captioner
    ```
3. 导航到克隆的目录：
    ```
    cd GPT4V-Image-Captioner
    ```
4. 使用以下命令使安装脚本和启动脚本变为可执行：
    ```
    chmod +x install_linux_mac.sh; chmod +x Start_linux_mac.sh
    ```
5. 执行安装脚本：
    ```
    ./install_linux_mac.sh
    ```
6. 然后，您可以在终端中执行启动脚本来启动GPT4V-Image-Captioner。
    ```
    ./Start_linux_mac.sh
    ```
7. 复制终端中显示的URL地址，在浏览器中打开Gradio应用界面。
8. 请在界面最上方输入OpenAI官方或者第三方的GPT-4V API Key与API Url，设置图像地址后，就可以图像打标了。

## Change Log

### January 2, 2024
- **One-Click Install & Launch**: Added one-click installation (`install_windows.bat` / `install_linux_mac.sh`) and launch (`Start_windows.bat` / `Start_linux_mac.sh`) features, simplifying the setup and startup process.
- **Environment Setup Instructions**: Supplemented the installation and launch instructions for the program under Windows and Linux environments.

### January 1, 2024
- **Speed Optimization**: Improved the speed of tagging images. Now annotations can be completed within 2-3 seconds.
- **Tag Management**: Provided different handling options for images with existing tags: "Overwrite", "Prepend", "Append", and "Skip".
- **Subfolder Processing**: The new program can now process all image files within folders and subfolders, supporting formats like '.png', '.jpg', '.jpeg', '.webp', '.bmp', '.gif', '.tiff', '.tif'.
- **Interruption Feature**: Added the ability to interrupt the batch tagging process.
- **Error Screening**: Images that fail GPT tagging (e.g., NSFW content) can be moved to a new folder based on keywords.
- **Localization**: Added support for the Chinese language.

## 更新内容

### 2024年1月2日
- **一键安装和一键启动**: 增加了一键安装 (`install_windows.bat` / `install_linux_mac.sh`) 和一键启动 (`Start_windows.bat` / `Start_linux_mac.sh`) 功能，简化了程序的安装和启动过程。
- **环境说明补充**: 补充了在Windows和Linux环境下程序的安装和启动说明。

### 2024年1月1日
- **运行加速**: 提高了程序的打标速度。现在可以在2-3秒内完成一张图片的标注。
- **标签处理**: 对于已有标签的图像文件，提供了以下不同处理选项："覆盖", "前置插入", "结尾追加" 和 "跳过"。
- **子文件夹处理**: 新程序能够处理文件夹及其子文件夹中的所有图像文件，支持的图像格式包括：'.png', '.jpg', '.jpeg', '.webp', '.bmp', '.gif', '.tiff', '.tif'。
- **程序中断**: 增加了在批量打标签过程中中断打标的功能。
- **报错筛查**: 可以根据关键词，将所有GPT标记失败的图像（例如NSFW内容）移动到新的文件夹中。
- **本地化**: 增加了对中文的支持。
